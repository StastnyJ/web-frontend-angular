<ksi-spinner [source]="task$"></ksi-spinner>
<main *ngIf="(task$ | async) as task">
  <div class="head">
    <h2>{{task.head.title | uppercase}}</h2>
    <div *ngIf="(authors$ | async) as authors" class="authors-container">
      {{(authors.length > 1 ? 'tasks.author.multiple' : 'tasks.author.single') | translate}}:
      <ksi-users-inline class="authors" [users]="authors"></ksi-users-inline>
    </div>
    <span class="deadline">{{'tasks.deadline' | translate}}: {{task.head.time_deadline | date}}, {{task.head.max_score | translatePoints}}</span>
  </div>

  <div *ngIf="(subpage$ | async) !== 0" class="back" >
  <a routerLink="." [fragment]="undefined">
    {{icon.BACK}} {{'tasks.back-to-assigment' | translate}}
  </a>
  </div>

  <ng-container [ngSwitch]="subpage$ | async">
    <ksi-task-body *ngSwitchCase="0" class="body" [body]="task.detail.taskDetails.body"></ksi-task-body>
    <ksi-task-body *ngSwitchCase="1" class="body" [body]="task.detail.taskDetails.solution"></ksi-task-body>
  </ng-container>

  <div class="bottom" *ngIf="(subpage$ | async) === 0">
    <a class="discussion" routerLink="./discussion">
      <span class="icon">{{icon.DISCUSSION}}</span>
      <span>{{'tasks.discussion' | translate}}</span>
      <span>({{task.detail.posts.length}})</span>
    </a>
    <a *ngIf="task.detail.taskDetails.solution" class="solution" routerLink="." fragment="solution">
      {{'tasks.solution' | translate}}
    </a>
  </div>
</main>
